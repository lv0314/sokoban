# 구현과정 상세 설명

## 1단계
- 먼저 자바스크립트에는 이차원 배열의 개념이 없으므로, 이차원 배열의 틀을 만들어 주는 create2DArray 함수를 생성했습니다.   
- 스테이지 맵을 문자열로 받기 위해 백틱을 사용해 변수에 저장했습니다. (이 과정에서 공백 문자를 확실히 하기 위해 원본의 비어있는 곳에 공백을 임의로 추가했습니다) + (스테이지 구분값 ====를 어떻게 처리할 지 도저히 모르겠어서 스테이지 별로 변수에 넣는 방식을 택했습니다)   
- 스테이지를 줄바꿈 단위로 잘라 배열에 넣고 반환하는 함수를 만들었습니다. (splitMap)   
- trans함수를 통해 동적으로 transedArr 배열을 활용하여 stage의 기호 값을 저장값으로 치환하였습니다.   
- inject 함수는 원래 stage2DArray 함수 안에 있던 기능인데 가독성을 위해 새로운 함수로 만들었습니다. 세로크기, 가로크기, 복사할 배열을 파라미터로 받아 세로, 가로를 가지고 이차원 배열 틀(mold)을 만든 뒤 인자로 받은 배열 내용을 복사해 반환하는 역할을 합니다.   
- stage2DArray 함수는 split 처리 된 배열을 인자로 받아 inject 함수의 실행을 통해 이차원 배열의 형태로 값을 반환합니다.   
- createMap 함수는 stage를 인자로 받아 위의 함수들을 조립하여 이차원 배열으로 반환합니다.   
- counting 함수는 이차원 배열을 돌면서 인자로 받은 저장값의 개수를 반환해주고, 이를 이용해 구멍과 공의 개수를 산출하였습니다.   
- 이와 비슷한 방식으로 플레이어의 Y, X좌표를 각각 산출했습니다.   
- 결과 출력을 위해 버튼을 누르면 Stage의 정보를 콘솔로 출력하도록 구현했습니다. (main.html)

## 2단계
- 현재 맵 정보를 전역변수로 선언해 Stage2의 값을 저장했습니다.   
- 저장값으로 저장 된 맵 정보를 기호로 치환하는 trans2 함수를 구현하였습니다.   
- transback 함수는 현재 맵 정보를 카피한 뒤 trans2 함수를 사용해 기호로 치환한 후 이를 반환합니다.   
> 이 과정에서 currentMap이 같이 수정되는 참조의 오류가 발생하여 map 함수를 이용해 깊은 복사를 사용했습니다.   
- transback 함수로 반환된 배열을 변수에 넣고 join 메서드를 사용해 콘솔 상에 맵을 띄우는 printCurrentMap 함수를 구현했습니다.   
- prompt로 받은 값을 split 처리하여 입력값 순서대로 조건문을 실행하는 inputMove 함수를 구현했습니다.(이동방향입력 버튼)   
> 해당하는 문자의 함수를 실행하고 변경된 currentMap을 다시 콘솔창에 출력하는 식으로 설계했습니다.   
- 앞에 들어온 y, x 인덱스 값을 뒤에 돌어온 y, x 인덱스 값으로 변환하는 swtIdx 함수를 구현했습니다.   
- 이동 함수들은 플레이어의 좌표를 가져와 해당하는 방향으로 갈 수 있다면(공백문자) 서로 값을 바꾸도록 구현했습니다.   
- 시작 시 Stage2의 지도를 출력하고, 현재 지도 출력 버튼과 이동 방향 입력 버튼을 구현했습니다. (main2.html)   

## 3단계
- 자바스크립트로 txt 파일을 직접 불러오는 방법을 열심히 검색해 봤지만 브라우저 보안 상의 이유로 불가능하다는 결론을 얻었습니다.   
- NodeJS를 사용하면 txt 파일을 불러올 수 있다는 걸 알게 됐지만, NodeJS를 접해본 적도 없고 당장 배워서 적용시키기엔 시간 상의 여유가 없었습니다.   
- 부득이하게 맵 정보를 const로 선언한 변수에 넣어서 과제를 진행하였습니다.   
- 먼저 2단계에서 구현한 이동 함수의 중복되는 부분을 따로 빼서 함수화했습니다.   
- holeStg 변수를 플레이어와 구멍이 겹쳐있는 경우 1을 더하고 빠져나가면 1을 빼는 식으로 함수에서 사용하였습니다.   
- moveTo 함수는 가고자 하는 방향의 인덱스를 매개변수로 받아 플레이어의 이동을 구현했습니다.   
- nearBall 함수는 가고자 하는 방향에 공이 있을 경우 공 앞에 있는 상황을 보고 플레이어의 이동 여부를 결정하도록 구현했습니다.   
- near0 함수는 가고자 하는 방향에 공이 들어있는 구멍(0)이 있을 경우 그 앞에 있는 상황올 보고 플레이어의 이동 여부를 결정하도록 구현했습니다.   
- 기존의 moveW,A,S,D 이동함수들에 위의 기능을 추가하여 moveW,A,S,D2 함수들로 구현하였습니다.   
- inputMove2 함수는 기존의 inputMove에서 초기화기능(r)을 추가하였습니다.   
- countingBall 함수는 현재 맵에 있는 공의 개수를 카운트하도록 구현했습니다.   
- check 함수는 countingBall 함수의 결과가 0일 경우, 즉 모든 공이 구멍에 들어갔을 경우 클리어 메시지와 사용한 턴 수를 출력하고 다음 스테이지로 넘어가도록 구현했습니다.   
> stageCheck 변수는 클리어시 1씩 더하여 다음 스테이지 진행에 사용하였습니다.   
> check 함수를 inputMove2 함수에 삽입하여 이동이 끝난 후마다 클리어 여부를 확인하도록 하였습니다.   
> 모든 스테이지 클리어 시 축하 메세지를 출력하도록 구현했습니다.   
- start 함수는 stageCheck 변수의 내용을 받아 스테이지 맵과 프롬프트를 출력하여 게임을 진행하도록 구현했습니다.   
- btnactMove 함수는 html의 버튼에 inputMove2 함수를 추가하여 이동이 끊겼을 때 다시 입력할 수 있도록 구현하였습니다.   
- gameStart 함수는 게임 시작 메세지를 출력하고 게임이 시작되도록 구현했습니다.   
- 처음 시작 시 Stage 1의 지도와 프롬프트가 실행되도록 gameStart 함수를 사용하여 구현했습니다.(main3.html)   

## 4단계
- saveslot 변수를 배열로 만들고 save 함수로 번호를 지정한 뒤 load함수로 해당 번호를 불러오면 저장됐던 스테이지부터 게임이 다시 시작됩니다.   
- 저장된 맵 정보를 불러와야 하는데 시간 상의 이유로 스테이지를 불러오는 기능으로밖에 구현하지 못했습니다.
-  main3.html에서 실행